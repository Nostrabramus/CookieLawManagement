# CookieLawManagement

Cookie Law Management allows to manage cookies accordingly to European Laws.

It allows a TYPO3 integrator to configure the web site in order to prevent cookies to be installed respecting  web site user choice using a combination of JQuery and Typoscript.
The extension works at the rendering level so that it can disable cookie installation caused either by standard content elements or third party TYPO3 extensions.
It is shipped with the capability to manage out of the box many 3rd party cookies (Google Analytics, Youtube, Vimeo, Slideshare and others) but it can be easily extended using regular expressions to manage any kind of  cookie.

The cookies that are currently handled by Cookie Law Management are those generated by: Facebook, Flickr, GoogleMaps, Prezi, SlideShare, Twitter, Vimeo, YouTube.

When a visitor enters the website for the first time, it will check the following and take action upon: it searches for its own meta cookies for indication of visitor previous choices, if they are not present or the user has explicitly denied the usage of specific cookies, the extension will prevent the loading of scripts or iframes. The web site visitor can re-enable these elements using a tab showed on the web page that will execute some javascript to re-include them into the DOM.

## Installation
Go to the module ADMIN TOOLS > Extensions. 
In the upper left corner of the module, select 'Get Extensions' from the dropdown.
Click on the button 'Update now'. The list of available extensions on the TYPO3 Extension Repository (TER) will be downloaded. This can take a while.
When the list is downloaded, search for 'aip_cookie_law'.
Click on the '+' icon in front of the extension name. The extension will be installed.
No static template has to be included in a system template. This is done automatically by using ext_typoscript_constants.txt and ext_typoscript_setup.txt in the root of the extension. The settings will be loaded and Javascript and CSS will be included in the output.

## Configuration
In order to use "Cookie Law Management" you necessary need to configure the page of the site to contain the cookie policy.
Go to the module WEB > Template.
In the page tree, select a page where a TypoScript template is located, mostly the root page of your website.
In the upper left corner of the module, select 'Constant Editor' from the dropdown.
Under 'Category' select 'AIPCOOKIELAW(13)' from the dropdown.
Go to the constant IdPageInformation (the sixth from the top) and set the UID of the page which contains the cookie policy.
There are many constants that allow full customization of the extension. You can find the complete list in the following section.

## Typoscript Constants

### On\Off
* Property: **OnOff**
* Data type: boolean
* Description: Activate/deactivate the banner with privacy info and consent button.
* Default: 1

### On\Off Pop-up
* Property: **OnOffPopUp**
* Data type: options
* Description: Activate/deactivate the tab to open the privacy pop-up (to activate the privacy pop-up in a menu or anywhere else    you can add add the attribute onclick="$('body').prepend(cc.showmodal) to a button or a link)
* Default: 1

### Opt-in Opt-out
* Property: **Opt-inOpt-out**
* Data type: options
* Description: Set to explicit (Opt-in) or implicit (Opt-out) the consent required to close the banner. Implicit means that scroll (if active) the window or click (if active) anywhere it's enough to give the consent and close the banner. Possible values 'Opt-in(Explicit)','Opt-out(Implicit)'.
* Default: Opt-in
        
### Scroll
* Property: **Scroll**
* Data type: boolean
* Description: Activate/deactivate the scroll to close the banner (works only in Opt-out mode)
* Default: 1

### Click
* Property: **Click**
* Data type: boolean
* Description: Activate/deactivate the click anywhere to close the banner (works only in Opt-out mode)
* Default: 1

### Cookie Expire
* Property: **CookieExpire**
* Data type: int
* Description: The duration of meta-cookie lifecycle in days
* Default: 30

### Id Page Information
* Property: **IdPageInformation**
* Data type: int
* Description: Uid of the page which contains the privacy policy text
* Default: 0

### Css Style
* Property: **CssStyle**
* Data type: string
* Description: location of the CSS file.
* Default: EXT:aip_cookie_law/Resources/Public/CSS/CookieLaw.css
        
### Style
* Property: **Style**
* Data type: options
* Description: Skin style of the cookie law management frontend plugin. Possible values 'dark','light'
* Default: dark

### Banner Position
* Property: **BannerPosition**
* Data type: options
* Description: The position of the starting pop-up. Possible values 'top','bottom'
* Default: top

### Tag Position
* Property: **TagPosition**
* Data type: options
* Description: The position of the tab button. Possible values 'bottom-right','bottom-left','vertical-right','vertical-left'
* Default: vertical-left

### Show Only Within EU
* Property: **OnlyShowWithinEU**
* Data type: boolean
* Description: Activate the window's geolocation functionality. If set to true (1) the banner works only within EU
* Default: 1

### Http Service API Location
* Property: **HttpServiceAPILocation**
* Data type: string
* Description: The url of the geolocation API service
* Default: http://api.wipmania.com/jsonp?
